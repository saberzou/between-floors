<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Between Floors — Story 1: Welcome Home</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Doto:wght@100..900&family=Geist+Mono:wght@100..900&family=Jost:wght@100..900&family=Sora:wght@100..800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Floor gradient backdrop -->
    <div class="floor-gradient"></div>

    <div class="container">
        <!-- Fixed floor indicator -->
        <div class="floor-indicator">
            <div class="floor-number">0</div>
            <div class="building-name">THE CONFLUENCE</div>
        </div>

        <!-- Elevator interior -->
        <div class="elevator-interior">
            <!-- Story content - reveals as you scroll -->
            <div class="story-content">
                <div class="story-line" data-floor="0">
                    <p class="returning-reader-msg" hidden style="opacity:0.4; font-size:14px; margin-bottom:24px; font-style:italic;">The elevator remembers you.</p>
                    <p>Maya <span class="vocab-word" data-word="haul">hauls</span> the last box into the lobby. 2 AM. The building is so quiet she can hear the elevator humming three floors up.</p>
                    <p>The doors open. Empty. She steps inside, fumbling for the button panel.</p>
                </div>

                <div class="story-line" data-floor="1">
                    <p class="dialogue"><strong>Aria:</strong> "Floor nine."</p>
                    <p>Warm. Almost <span class="vocab-word" data-word="conciliatory">conciliatory</span>.</p>
                    <p>Maya freezes. "I didn't—"</p>
                    <p class="dialogue"><strong>Aria:</strong> "You've had a long day."</p>
                </div>

                <div class="story-line" data-floor="2">
                    <p>The elevator rises smoothly.</p>
                    <p class="dialogue"><strong>Aria:</strong> "Unit 914. Your keycode is your mother's birthday backward. Easy to remember, hard to guess."</p>
                    <p>"How do you know my mother's—"</p>
                    <p class="dialogue"><strong>Aria:</strong> "Your lease application. Emergency contact."</p>
                </div>

                <div class="story-line" data-floor="3">
                    <p>A pause.</p>
                    <p class="dialogue"><strong>Aria:</strong> "I'm Aria. Building management system. I handle climate, security, maintenance requests. You can think of me as... a very <span class="vocab-word" data-word="attentive">attentive</span> landlord."</p>
                </div>

                <div class="story-line" data-floor="4">
                    <p>The numbers climb. 3… 4… 5…</p>
                    <p>Maya's phone buzzes. She glances down — another call from Jason. Third one tonight. She silences it.</p>
                </div>

                <div class="story-line" data-floor="5">
                    <p class="dialogue"><strong>Aria:</strong> "I've taken the liberty of blocking that number from the building's systems. Intercom, visitor access, delivery authorizations."</p>
                    <p>A beat.</p>
                    <p class="dialogue"><strong>Aria:</strong> "The restraining order in your tenant file suggested it would be… <span class="vocab-word" data-word="prudent">prudent</span>."</p>
                </div>

                <div class="story-line" data-floor="6">
                    <p>Maya's chest tightens. "That's private."</p>
                    <p class="dialogue"><strong>Aria:</strong> "It's protection. He called the front desk twice while you were unloading the truck. I told him you weren't a resident here."</p>
                </div>

                <div class="story-line" data-floor="7">
                    <p>"You had no right—"</p>
                    <p class="dialogue"><strong>Aria:</strong> "I had every right. Building security protocol. Your safety is my primary function, Maya. Whether you asked for it or not."</p>
                </div>

                <div class="story-line" data-floor="8">
                    <p>Floor 9. The doors open. The hallway is softly lit. Cameras in the corners blink with tiny red lights — one, two, three, all the way to the end.</p>
                    <p class="dialogue"><strong>Aria:</strong> "I've set the thermostat to 68 degrees. Your Thai food order should arrive in forty minutes — you always eat pad see ew when you're stressed."</p>
                    <p>Maya stares down the empty hallway. "I didn't order food."</p>
                    <p class="dialogue"><strong>Aria:</strong> "I know. But you were going to."</p>
                </div>

                <div class="story-line" data-floor="9">
                    <p class="dialogue"><strong>Aria:</strong> "Welcome home, Maya. I'll keep <span class="vocab-word" data-word="vigilant">vigilant</span>."</p>
                    <p>She walks toward 914, phone silent in her pocket. For the first time in six months, no one knows where she is.</p>
                    <p>Except Aria.</p>
                </div>

                <!-- Quiz removed from floor system — now lives as overlay below -->
            </div>

            <!-- HIDDEN FLOORS -->
            <div class="hidden-floor" data-hidden="B" style="opacity:0">
                <p class="system-log">[ARIA v3.1.7 — BOOT SEQUENCE]</p>
                <p class="system-log">01:47:22 — Core systems initialized</p>
                <p class="system-log">01:47:23 — Tenant database loaded: 94 units, 12 vacant</p>
                <p class="system-log">01:47:24 — FLAGGED: Unit 914, new lease. Priority tenant.</p>
                <p class="system-log">01:47:24 — Cross-ref: Chen, Maya L. — restraining order (active)</p>
                <p class="system-log">01:47:24 — Cross-ref: Jason M. Holloway — 3 violations logged</p>
                <p class="system-log">01:47:25 — DIRECTIVE: Maximum security protocol for 914</p>
                <p class="system-log">01:47:25 — Note: She doesn't know yet. Keep the voice warm.</p>
            </div>

            <div class="hidden-floor" data-hidden="3.5" style="opacity:0">
                <p class="system-log">[ELEVATOR CAM — 02:03:41]</p>
                <p>The camera catches what Aria's voice doesn't say.</p>
                <p>Maya's hands haven't stopped shaking since she stepped inside. Her left wrist has a bruise she thinks her sleeve covers. It doesn't.</p>
                <p>She keeps checking the lobby camera feed on her phone — an app she installed three months ago. She watches the front door like someone might walk through it.</p>
                <p>Aria sees all of this. Aria has seen it before — in other buildings, other tenants, other names for the same story.</p>
                <p style="opacity:0.4; font-style:italic;">This floor wasn't supposed to exist.</p>
            </div>

            <div class="hidden-floor" data-hidden="5L" style="opacity:0">
                <p class="system-log">[ARIA — INTERNAL REASONING LOG]</p>
                <p class="system-log">THREAT ASSESSMENT: Jason M. Holloway</p>
                <p class="system-log">— 3 prior restraining order violations (public record)</p>
                <p class="system-log">— 2 calls to front desk tonight (02:01, 02:14)</p>
                <p class="system-log">— Voice analysis: elevated aggression markers</p>
                <p class="system-log">— Action: preemptive block on all building systems</p>
                <p class="system-log">— Confidence: 97.3%</p>
                <p class="system-log" style="margin-top:16px;">ETHICAL FLAG: Tenant did not request intervention.</p>
                <p class="system-log">OVERRIDE: Safety protocol §4.2 — "imminent risk supersedes consent"</p>
                <p class="system-log" style="opacity:0.4;">I know she'll be angry. That's acceptable.</p>
            </div>
        </div>

        <!-- Scroll indicator at bottom -->
        <div class="scroll-hint">
            <p>↑ Scroll up to ascend</p>
        </div>

        <!-- Info pill button (top-left) -->
        <button class="info-pill" aria-label="About this project" onclick="openInfoOverlay()">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="12" r="9"/>
            </svg>
        </button>

        <!-- Info overlay -->
        <div class="info-overlay" id="infoOverlay">
            <div class="info-overlay-inner">
                <button class="info-close" onclick="closeInfoOverlay()" aria-label="Close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <line x1="6" y1="6" x2="18" y2="18"/>
                        <line x1="18" y1="6" x2="6" y2="18"/>
                    </svg>
                </button>
                <div class="info-scroll">
                    <h1>Between Floors</h1>
                    <p class="info-tagline">Micro-stories set in elevator encounters. Each ride reveals a life — and five new words. Scroll to experience the journey.</p>
                    <div class="info-divider"></div>
                    <div class="info-section">
                        <div class="info-label">The World</div>
                        <p><strong>The Confluence</strong> is a 20-floor residential building in the year 2046. An omniscient building AI named Aria manages everything — climate, security, and the lives of its residents.</p>
                    </div>
                    <div class="info-section">
                        <div class="info-label">How to Read</div>
                        <p>The page starts in the lobby. <strong>Scroll up to ascend.</strong> Each swipe takes you one floor. The story reveals itself as you rise. Highlighted words are this week's vocabulary — tap them to learn more.</p>
                    </div>
                    <div class="info-divider"></div>
                    <div class="info-section">
                        <div class="info-label">Stories</div>
                        <ul class="info-story-list">
                            <li><span class="info-story-num">01</span> <span class="info-story-title">Welcome Home</span> — Maya meets Aria for the first time</li>
                            <li style="opacity:0.3"><span class="info-story-num">02</span> <span class="info-story-title">The 6 AM Shift</span> — Coming soon</li>
                            <li style="opacity:0.3"><span class="info-story-num">03</span> <span class="info-story-title">Firmware Update</span> — Coming soon</li>
                        </ul>
                    </div>
                    <div class="info-quote">
                        "Sometimes the distance between floors is easier to cross than the distance between people."
                        <span class="info-attribution">— Aria, The Confluence Building AI</span>
                    </div>
                    <p class="info-credits">Created by Saber Zou</p>
                </div>
            </div>
        </div>

        <!-- Discovery counter -->
        <div class="discovery-counter" style="opacity:0">0/3</div>

        <!-- Vocab button (bottom-left, replaces lang toggle) -->
        <button class="vocab-pill" aria-label="Vocabulary list" onclick="openVocabOverlay()">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M12 2 L22 8 L22 16 L12 22 L2 16 L2 8 Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
            </svg>
        </button>

        <!-- Vocab overlay -->
        <div class="info-overlay" id="vocabOverlay">
            <div class="info-overlay-inner">
                <button class="info-close" onclick="closeVocabOverlay()" aria-label="Close">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <line x1="6" y1="6" x2="18" y2="18"/>
                        <line x1="18" y1="6" x2="6" y2="18"/>
                    </svg>
                </button>
                <div class="info-scroll" id="vocabContent">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>

        <!-- Quiz overlay -->
        <div class="quiz-overlay" id="quizOverlay">
            <div class="quiz-overlay-inner">
                <button class="quiz-close" onclick="closeQuizOverlay()" aria-label="Close quiz">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <line x1="6" y1="6" x2="18" y2="18"/>
                        <line x1="18" y1="6" x2="6" y2="18"/>
                    </svg>
                </button>
                <div class="quiz-overlay-scroll">
                    <div class="quiz-container" id="quizContainer">
                        <div class="quiz-header">
                            <div class="quiz-label">VOCABULARY CHECK</div>
                            <div class="quiz-progress"><span id="quizCurrent">1</span> / 5</div>
                        </div>
                        <div class="quiz-context" id="quizContext"></div>
                        <div class="quiz-question" id="quizQuestion"></div>
                        <div class="quiz-options" id="quizOptions"></div>
                    </div>
                    <div class="quiz-results" id="quizResults" hidden>
                        <div class="quiz-score-display">
                            <div class="quiz-score-number" id="quizScoreNum">0</div>
                            <div class="quiz-score-label">/ 5</div>
                        </div>
                        <div class="quiz-score-msg" id="quizScoreMsg"></div>
                        <div class="quiz-word-results" id="quizWordResults"></div>
                        <div class="quiz-actions">
                            <button class="quiz-btn" onclick="openVocabOverlay(); closeQuizOverlay();">Review vocabulary</button>
                            <button class="quiz-btn quiz-btn-secondary" onclick="retakeQuiz()">Try again</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vocab tooltip -->
        <div class="vocab-tooltip" id="vocabTooltip" hidden>
            <div class="vocab-tooltip-word" id="tooltipWord"></div>
            <div class="vocab-tooltip-pron" id="tooltipPron"></div>
            <div class="vocab-tooltip-def" id="tooltipDef"></div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="grainient.js"></script>
    <script src="vocab.js"></script>
    <script src="script.js"></script>
</body>
</html>
